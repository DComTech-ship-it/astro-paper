---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";

---

<Layout>
  <Header />
  <main id="main-content" class="app-layout">
    <section class="max-w-4xl mx-auto px-4 py-12">
      <div class="max-w-2xl mx-auto">
        <h1 class="text-4xl font-bold mb-8 text-center">
          Submit Your Story
        </h1>
        
        <div class="bg-card p-8 rounded-lg shadow-lg">
          <form 
            action="https://formspree.io/f/your-form-id" 
            method="POST"
            class="space-y-6"
          >
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <label for="name" class="block text-sm font-medium mb-2">
                  Your Name *
                </label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                  placeholder="John Doe"
                />
              </div>
              
              <div>
                <label for="email" class="block text-sm font-medium mb-2">
                  Email Address *
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                  placeholder="john@example.com"
                />
              </div>
            </div>

            <div>
              <label for="title" class="block text-sm font-medium mb-2">
                Post Title *
              </label>
              <input
                type="text"
                id="title"
                name="title"
                required
                class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                placeholder="Your inspiring story title"
              />
            </div>

            <div>
              <label for="category" class="block text-sm font-medium mb-2">
                Category *
              </label>
              <select
                id="category"
                name="category"
                required
                class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
              >
                <option value="">Select a category</option>
                <option value="creativity">Creativity</option>
                <option value="inspiration">Inspiration</option>
                <option value="practical-tips">Practical Tips</option>
                <option value="community">Community</option>
                <option value="growth">Personal Growth</option>
              </select>
            </div>

            <div>
              <label for="content" class="block text-sm font-medium mb-2">
                Your Story *
              </label>
              <textarea
                id="content"
                name="content"
                required
                rows="12"
                class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-vertical"
                placeholder="Share your authentic story, practical tips, or inspiring experience..."
              ></textarea>
            </div>

            <div>
              <label for="bio" class="block text-sm font-medium mb-2">
                Short Bio (Optional)
              </label>
              <textarea
                id="bio"
                name="bio"
                rows="3"
                class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-vertical"
                placeholder="Tell us briefly about yourself..."
              ></textarea>
            </div>

            <div>
              <label for="social-links" class="block text-sm font-medium mb-2">
                Social Links (Optional)
              </label>
              <input
                type="url"
                id="social-links"
                name="social-links"
                class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent"
                placeholder="https://twitter.com/yourhandle"
              />
            </div>

            <div>
              <label for="file-upload" class="block text-sm font-medium mb-2">
                Upload Image (Optional)
              </label>
              <input
                type="file"
                id="file-upload"
                name="file-upload"
                accept="image/*"
                class="w-full px-4 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent file:mr-4 file:file:mr-4"
              />
              <p class="text-sm text-muted mt-1">
                Accepted formats: JPG, PNG, GIF. Max size: 5MB
              </p>
            </div>

            <div class="bg-muted p-4 rounded-lg">
              <h3 class="font-semibold mb-2">Submission Guidelines</h3>
              <ul class="text-sm space-y-1 list-disc list-inside">
                <li>Be authentic and original - no plagiarism</li>
                <li>Keep content positive and uplifting</li>
                <li>Minimum 300 words for stories</li>
                <li>Proofread before submitting</li>
                <li>We reserve the right to edit for clarity</li>
                <li>You'll be notified via email within 3-5 days</li>
              </ul>
            </div>

            <div class="flex items-start">
              <input
                type="checkbox"
                id="agreement"
                name="agreement"
                required
                class="mt-1 mr-2"
              />
              <label for="agreement" class="text-sm">
                I agree to the submission guidelines and understand that my content may be edited for clarity and length *
              </label>
            </div>

            <div class="flex justify-center">
              <button
                type="submit"
                class="px-8 py-3 bg-accent text-background rounded-lg hover:bg-accent/90 transition-colors font-medium text-lg"
              >
                Submit Your Story
              </button>
            </div>
          </form>
        </div>
      </section>
    </main>
    <Footer />
  </Layout>

  <script>
    // Add form validation and user feedback
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.querySelector('form') as HTMLFormElement;
      if (form) {
        form.addEventListener('submit', (e) => {
          const submitBtn = form.querySelector('button[type="submit"]') as HTMLButtonElement;
          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            // Reset button after 5 seconds (in case of error)
            setTimeout(() => {
              submitBtn.disabled = false;
              submitBtn.textContent = 'Submit Your Story';
            }, 5000);
          }
        });
      }
    });
  </script>
</Layout>
