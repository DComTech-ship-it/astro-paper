---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import Breadcrumb from "@/components/Breadcrumb.astro";
import AuthorProfile from "@/components/AuthorProfile.astro";
import authorsData from "@/data/authors.json";
import type { Author } from "@/types/author";

const authors: Author[] = Object.values(authorsData);

// Sort authors: main author first, then by join date
const sortedAuthors = authors.sort((a, b) => {
  if (a.isGuest !== b.isGuest) {
    return a.isGuest ? 1 : -1;
  }
  return new Date(b.joinedAt || 0).getTime() - new Date(a.joinedAt || 0).getTime();
});
---

<Layout title="Authors | Bigger Minds">
  <Header />
  <Breadcrumb />
  <main data-pagefind-body class="app-layout pb-12">
    <div class="max-w-4xl mx-auto px-4 py-12">
      <header class="text-center mb-12">
        <h1 class="text-3xl font-bold mb-4">Meet Our Authors</h1>
        <p class="text-muted text-lg max-w-2xl mx-auto">
          Discover the talented writers who share their stories, insights, and expertise on Bigger Minds.
        </p>
      </header>

      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {sortedAuthors.map((author) => (
          <article class="bg-card border border-border rounded-lg p-6 hover:shadow-lg transition-shadow">
            <AuthorProfile 
              author={author}
              size="lg"
              showBio={true}
              showSocialLinks={true}
              showPostCount={true}
              className="mb-4"
            />
            
            {author.isGuest && (
              <div class="mt-4 pt-4 border-t border-border">
                <p class="text-sm text-muted">
                  <span class="inline-flex items-center gap-1">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                    </svg>
                    Guest Contributor
                  </span>
                </p>
              </div>
            )}
          </article>
        ))}
      </div>

      <section class="mt-16 text-center">
        <div class="bg-accent/10 rounded-lg p-8 max-w-2xl mx-auto">
          <h2 class="text-2xl font-semibold mb-4">Want to Become a Contributor?</h2>
          <p class="text-muted mb-6">
            Share your story, insights, and expertise with our community. We welcome guest authors who are passionate about making a positive impact.
          </p>
          <a 
            href="/submit" 
            class="inline-flex items-center gap-2 px-6 py-3 bg-accent text-background rounded-lg hover:bg-accent/90 transition-colors font-medium"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            Submit Your Story
          </a>
        </div>
      </section>
    </div>
  </main>
  <Footer />
</Layout>
